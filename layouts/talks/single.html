{{ define "main" }}
  <head>
    <link rel="stylesheet" href="/notes/css/talks.css?v={{ now.Unix }}">
  </head>
  
  <div class="slide-container">
    <h1 class="slide-title">{{ .Title }}</h1>
    <h2 class="slide-subtitle">{{ .Params.subtitle }}</h2>

    <nav class="slide-navigation">
      <ul>
        {{ range .Site.Menus.main }}
          <li><a href="{{ .URL }}">{{ .Name }}</a></li>
        {{ end }}
      </ul>
    </nav>

    <div class='slide-rect'></div>

    <div class="author-container">
    {{- range .Params.authors }}
      {{- with $.Site.GetPage "taxonomyTerm" (printf "authors/%s" (urlize .)) }}
        <span class="author">
          <a href="{{ .Permalink }}">{{ .Params.name }}</a>
        </span>
      {{ end }}
    {{ end }}
    </div>

    <div class="version-link-container">
      <span class="version">{{ .Params.version }}</span>
      |
      <span class="link">
        <a href="{{ .Params.link }}" target="_blank">{{ .Params.link }}</a>
      </span>
    </div>
    
    <div class="slide-footer-left">
    </div>
    <div class="slide-footer-center">
      <time datetime="{{ .Date | time.Format "2006-01-02T15:04:05-07:00" }}">
        {{ .Date | time.Format "2006-01-02" }}
      </time>
    </div>
    <div class="slide-footer-right">
    </div>
  </div>


  <div id="floating-menu">
    <button id="menu-toggle">â˜°</button>
    <nav id="menu-list"></nav>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Get slide data from Hugo front matter
      const slides = {{ .Params.slides | jsonify }};
      const menuList = document.getElementById("menu-list");

      if (!slides || slides.length === 0) {
        console.warn("No slides data found.");
        return;
      }

      // Populate menu with slides
      slides.forEach(slide => {
        let slideItem = document.createElement("a");
        slideItem.href = `/${slide}`;
        slideItem.textContent = slide;
        slideItem.classList.add("slide-link");
        menuList.appendChild(slideItem);
      });

      // Restore menu visibility state
      const menuToggle = document.getElementById("menu-toggle");
      const savedState = localStorage.getItem("menuVisible");
      if (savedState === "true") {
        menuList.classList.add("visible");
      }

      // Toggle menu visibility
      menuToggle.addEventListener("click", function () {
        menuList.classList.toggle("visible");
        localStorage.setItem("menuVisible", menuList.classList.contains("visible"));
      });
    });
  </script>

  <style>
    #floating-menu {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.8);
      padding: 10px;
      border-radius: 8px;
      z-index: 1000;
    }

    #menu-list {
      display: none;
      list-style: none;
      padding: 0;
    }

    #menu-list.visible {
      display: block;
    }

    .slide-link {
      display: block;
      color: white;
      text-decoration: none;
      padding: 5px;
    }

    .slide-link:hover {
      background: gray;
    }
  </style>


{{ end }}
